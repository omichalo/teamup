# SQY Ping - Team Up

Application web moderne pour la gestion des compositions d'Ã©quipes et la disponibilitÃ© des joueurs du club SQY Ping lors du championnat de France par Ã©quipes.

## ğŸ“ FonctionnalitÃ©s

### Pour les entraÃ®neurs (coachs)
- **Tableau de bord** : Vue d'ensemble des prochains matches, disponibilitÃ©s et classements
- **Compositions d'Ã©quipes** : Interface drag & drop pour crÃ©er et valider les compositions
- **Validation automatique** : Respect des rÃ¨gles FFTT (brÃ»lage, quotas, ordre des points)
- **Gestion des disponibilitÃ©s** : Tableau interactif pour suivre les disponibilitÃ©s des joueurs
- **Notifications Discord** : Envoi automatique de convocations via Discord
- **ParamÃ¨tres du club** : Configuration des Ã©quipes, joueurs et intÃ©grations

### Pour les joueurs
- **Consultation des matches** : Visualisation des prochains matches
- **DÃ©claration de disponibilitÃ©** : PossibilitÃ© de dÃ©clarer sa disponibilitÃ© (phase 3)

## ğŸ› ï¸ Technologies utilisÃ©es

- **Frontend** : Next.js 14, React 19, TypeScript
- **UI** : Material-UI avec le thÃ¨me @omichalo/sqyping-mui-theme
- **Backend** : Next.js API Routes (serverless)
- **Base de donnÃ©es** : Firebase Firestore
- **Authentification** : Firebase Auth (Google Sign-In)
- **API externe** : @omichalo/ffttapi-node pour les donnÃ©es FFTT
- **Drag & Drop** : react-beautiful-dnd
- **Formulaires** : React Hook Form avec validation Yup

## ğŸš€ Installation et configuration

### PrÃ©requis
- Node.js 18+ 
- npm ou yarn
- Compte Firebase
- Identifiants FFTT pour l'API

### Installation

1. **Cloner le projet**
```bash
git clone <repository-url>
cd teamup
```

2. **Installer les dÃ©pendances**
```bash
npm install
```

3. **Configuration des variables d'environnement**
```bash
cp env.example .env.local
```

Remplir le fichier `.env.local` avec vos configurations :
```env
# Firebase Configuration
NEXT_PUBLIC_FIREBASE_API_KEY=your_firebase_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=123456789
NEXT_PUBLIC_FIREBASE_APP_ID=1:123456789:web:abcdef

# FFTT API Configuration
ID_FFTT=your_fftt_id
PWD_FFTT=your_fftt_password

# Discord Webhooks (optionnel)
DISCORD_WEBHOOK_TEAM1=https://discord.com/api/webhooks/...
DISCORD_WEBHOOK_TEAM2=https://discord.com/api/webhooks/...
DISCORD_WEBHOOK_TEAM3=https://discord.com/api/webhooks/...

# Club Configuration
CLUB_CODE_FFTT=your_club_code
CLUB_NAME=your_club_name
```

4. **DÃ©marrer le serveur de dÃ©veloppement**
```bash
npm run dev
```

L'application sera accessible sur [http://localhost:3000](http://localhost:3000)

## ğŸ“‹ RÃ¨gles sportives implÃ©mentÃ©es

### BrÃ»lage et qualification des joueurs
- âœ… Un joueur ne peut participer qu'Ã  une seule rencontre par journÃ©e
- âœ… BrÃ»lage : aprÃ¨s 2 rencontres dans une phase, interdiction de jouer en Ã©quipe supÃ©rieure
- âœ… JournÃ©e 2 : quotas limitÃ©s pour les joueurs d'Ã©quipes infÃ©rieures
- âœ… Remise Ã  zÃ©ro du brÃ»lage Ã  la fin des phases
- âœ… Interdiction d'interversion entre Ã©quipes d'une mÃªme poule

### Composition d'Ã©quipe et quotas
- âœ… Maximum 2 joueuses par Ã©quipe masculine
- âœ… Maximum 1 joueur Ã©tranger par Ã©quipe
- âœ… Ordre des joueurs selon les points de classement (dÃ©croissant)
- âœ… Gestion des joueurs mutÃ©s (transferts)

### Ordre des rencontres
- âœ… Positions fixes A, B, C, D pour l'Ã©quipe locale
- âœ… Ordre des parties respectÃ© selon le rÃ¨glement FFTT

## ğŸ—ï¸ Architecture

```
src/
â”œâ”€â”€ app/                    # Pages Next.js App Router
â”‚   â”œâ”€â”€ auth/              # Page d'authentification
â”‚   â”œâ”€â”€ compositions/      # Page de composition
â”‚   â”œâ”€â”€ disponibilites/    # Page de disponibilitÃ©s
â”‚   â”œâ”€â”€ settings/          # Page de paramÃ¨tres
â”‚   â””â”€â”€ layout.tsx         # Layout principal
â”œâ”€â”€ components/            # Composants rÃ©utilisables
â”‚   â””â”€â”€ Layout.tsx         # Layout avec navigation
â”œâ”€â”€ hooks/                 # Hooks personnalisÃ©s
â”‚   â””â”€â”€ useAuth.ts         # Hook d'authentification
â”œâ”€â”€ lib/                   # Configuration et utilitaires
â”‚   â”œâ”€â”€ firebase.ts        # Configuration Firebase
â”‚   â””â”€â”€ theme.tsx          # Configuration du thÃ¨me MUI
â”œâ”€â”€ pages/api/             # Routes API Next.js
â”‚   â”œâ”€â”€ fftt/              # API FFTT
â”‚   â”œâ”€â”€ discord/           # IntÃ©gration Discord
â”‚   â””â”€â”€ brulage/           # Validation des rÃ¨gles
â”œâ”€â”€ services/              # Services mÃ©tier
â”‚   â”œâ”€â”€ firebase.ts        # Service Firebase
â”‚   â””â”€â”€ brulageService.ts  # Service de validation
â””â”€â”€ types/                 # Types TypeScript
    â””â”€â”€ index.ts           # DÃ©finitions des types
```

## ğŸ”§ API Routes

### FFTT API
- `GET /api/fftt/player` - Recherche d'un joueur par nom ou licence
- `GET /api/fftt/matches` - RÃ©cupÃ©ration des matches du club

### Validation
- `POST /api/brulage/validate` - Validation d'une composition

### Discord
- `POST /api/discord/send` - Envoi de convocations Discord

## ğŸ¨ ThÃ¨me et design

L'application utilise le thÃ¨me @omichalo/sqyping-mui-theme qui fournit :
- Palette de couleurs bleu marine / orange
- Composants MUI prÃ©-configurÃ©s
- Support du mode sombre
- Typographie Figtree

## ğŸš€ DÃ©ploiement

### Vercel (recommandÃ©)
1. Connecter le repository Ã  Vercel
2. Configurer les variables d'environnement
3. DÃ©ployer automatiquement

### Firebase Hosting
```bash
npm run build
npm install -g firebase-tools
firebase login
firebase init hosting
firebase deploy
```

## ğŸ§ª Tests

```bash
# Tests unitaires
npm run test

# Tests E2E
npm run test:e2e

# Coverage
npm run test:coverage
```

## ğŸ“ Roadmap

### Phase 1 (Actuelle)
- âœ… Authentification Google
- âœ… Gestion des compositions avec validation
- âœ… Interface de disponibilitÃ©s
- âœ… IntÃ©gration Discord
- âœ… ParamÃ¨tres du club

### Phase 2
- ğŸ”„ Import automatique des donnÃ©es FFTT
- ğŸ”„ Notifications par email
- ğŸ”„ Historique des compositions
- ğŸ”„ Statistiques avancÃ©es

### Phase 3
- ğŸ“‹ Interface joueur pour dÃ©clarer les disponibilitÃ©s
- ğŸ“‹ Confirmation/refus des convocations
- ğŸ“‹ Application mobile (PWA)
- ğŸ“‹ IntÃ©gration calendrier

## ğŸ¤ Contribution

1. Fork le projet
2. CrÃ©er une branche feature (`git checkout -b feature/nouvelle-fonctionnalite`)
3. Commit les changements (`git commit -am 'Ajout nouvelle fonctionnalitÃ©'`)
4. Push vers la branche (`git push origin feature/nouvelle-fonctionnalite`)
5. CrÃ©er une Pull Request

## ğŸ“„ Licence

Ce projet est sous licence MIT. Voir le fichier `LICENSE` pour plus de dÃ©tails.

## ğŸ†˜ Support

Pour toute question ou problÃ¨me :
- CrÃ©er une issue sur GitHub
- Contacter l'Ã©quipe de dÃ©veloppement
- Consulter la documentation FFTT pour les rÃ¨gles sportives

---

**SQY Ping - Team Up** - Application dÃ©veloppÃ©e avec â¤ï¸ pour le club SQY Ping