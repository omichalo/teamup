#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

echo "üèó  V√©rification avant push (lint + type-check)..."
npm run check:dev

# V√©rifier qu'il n'y a pas de warnings ESLint
LINT_OUTPUT=$(npm run lint 2>&1)
WARNING_COUNT=$(echo "$LINT_OUTPUT" | grep -c "warning" || true)
if [ "$WARNING_COUNT" -gt 0 ]; then
  echo "‚ùå Des warnings ESLint ont √©t√© d√©tect√©s. Veuillez les corriger avant de pousser."
  echo "$LINT_OUTPUT" | grep "warning"
  exit 1
fi